<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zgcenv.elip.official.dao.NewsDao">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.zgcenv.elip.official.entity.News">
        <id column="id" property="id"/>
        <result column="column_id" property="columnId"/>
        <result column="title" property="title"/>
        <result column="head_pic" property="headPic"/>
        <result column="description" property="description"/>
        <result column="context" property="context"/>
        <result column="look_sum" property="lookSum"/>
        <result column="follow_sum" property="followSum"/>
        <result column="insert_time" property="insertTime"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, column_id, title, head_pic, description, context, look_sum, follow_sum, insert_time, update_time
    </sql>

    <select id="listPageVo" resultType="com.zgcenv.elip.official.module.NewsColumnsVo">
        select n.*,c.title as columnTitle from tb_news n left join tb_columns c on n.column_id = c.id
        <where>
            <if test="query.columnId != null and query.columnId != ''">
                and n.column_id = #{query.columnId}
            </if>
            <if test="query.title != null and query.title != ''">
                and n.title like CONCAT('%',#{query.title},'%')
            </if>
        </where>
    </select>

</mapper>
